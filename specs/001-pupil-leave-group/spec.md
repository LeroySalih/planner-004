# Feature Specification: Pupil Self-Removal from Groups

**Feature Branch**: `[001-pupil-leave-group]`  
**Created**: 2025-10-31  
**Status**: Draft  
**Input**: User description: "Allow the pupil to remove themselves from a group."

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Pupil leaves an optional group (Priority: P1)

A signed-in pupil views the groups they belong to, decides to stop participating in an optional group, and removes themselves without teacher intervention.

**Why this priority**: Enables the core request—students regaining control over their memberships and reducing teacher/admin workload caused by manual removal requests.

**Independent Test**: Can be fully tested by having a pupil leave a non-mandatory group and verifying the membership removal, ineligibility for new group updates, and confirmation messaging.

**Acceptance Scenarios**:

1. **Given** a pupil is enrolled in an optional group, **When** they select “Leave group” and confirm, **Then** the system removes their membership immediately and the group disappears from their group list.
2. **Given** a pupil has upcoming assignments tied to a group they leave, **When** removal is confirmed, **Then** the pupil is no longer able to access those assignment materials and receives a notice that leaving ends access.

---

### User Story 2 - Pupil backs out of leaving (Priority: P2)

A pupil initiates leaving a group but changes their mind after reviewing the consequences and cancels the action still enrolled.

**Why this priority**: Prevents accidental loss of access and informs pupils before they commit, avoiding support tickets generated by unintended departures.

**Independent Test**: Can be tested by initiating the leave flow, cancelling at the confirmation prompt, and confirming the pupil remains in the group with uninterrupted access.

**Acceptance Scenarios**:

1. **Given** a pupil opens the leave dialog for a group, **When** they choose to cancel, **Then** the dialog closes and their membership and access remain unchanged.

---

### User Story 3 - Pupil understands restrictions on locked groups (Priority: P3)

A pupil encounters a group labelled as teacher-managed and learns why the leave option is not available.

**Why this priority**: Ensures clarity for mandatory placements so teachers retain necessary control without confusing pupils.

**Independent Test**: Tested by viewing a teacher-managed group as a pupil and verifying the absence of the leave control plus an explanatory message.

**Acceptance Scenarios**:

1. **Given** a pupil is in a group flagged as teacher-managed, **When** they inspect the group details, **Then** they see messaging that the group cannot be left and instructions to contact their teacher for changes.

---

### Edge Cases

- Pupil tries to leave the only group that provides platform access to required materials—system must block and communicate why.
- Pupil has pending submissions or feedback in the group when they leave—system must ensure records remain for teachers and clarify loss of access for the pupil.
- Rapid repeat clicks on the leave control or loss of connectivity mid-flow—system must prevent duplicate removals and surface a resilient status message.

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: System MUST present a clearly labelled “Leave group” control to pupils on groups that allow self-removal.
- **FR-002**: System MUST display a confirmation step summarising the immediate consequences (loss of access, notification expectation) before completing removal.
- **FR-003**: System MUST immediately revoke the pupil’s membership upon confirmation and update all pupil-facing group and assignment views within the same session.


### Key Entities *(include if feature involves data)*

- **Pupil**: Represents an authenticated learner; key attributes include unique identifier, enrolments, and contact preferences.
- **Group**: Represents a collaborative or instructional cohort; key attributes include group identifier, teacher owner, optional/mandatory flag, and associated assignments.
- **Group Membership**: Represents the relationship between pupils and groups; key attributes include pupil ID, group ID, join source (teacher-assigned or self-joined), status, and timestamps.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 95% of pupils who attempt to leave an optional group complete the process successfully within 30 seconds of initiating it.
- **SC-002**: 100% of leave attempts on teacher-managed groups display an explanatory message clarifying why the action is unavailable.
- **SC-003**: Post-launch feedback survey shows at least 80% of pupils feel confident managing their own group memberships.
- **SC-004**: Teacher or support requests related to removing pupils from groups decrease by 40% within one academic term of launch.

## Assumptions

- Groups configured for self-removal are optional by design; mandatory groups are already flagged as teacher-managed within existing data.
- Teachers receive system notifications for roster changes today, and the same channel can convey self-removal alerts without new tooling.
- Leaving a group revokes access to future materials while preserving historical submissions for teacher records.
